version: '{build}'
os: Visual Studio 2015
configuration: Debug
environment:
  COVERALLS_REPO_TOKEN:
    secure: s7GZarSt3Q0wrGUd9sspQEEg6xwze/QBzTkRMgBo8IIlSvTDpgbMbfnAcC0ZVjeb
install:
- ps: >-
    nuget update -self

    nuget sources add -Name netcore -Source http://myget.org/F/dotnet-core

    Invoke-WebRequest "https://raw.githubusercontent.com/dotnet/cli/rel/1.0.0-preview1/scripts/obtain/dotnet-install.ps1" -OutFile ".\dotnet-install.ps1"

    $env:DOTNET_INSTALL_DIR = "$pwd\.dotnetcli"

    & .\dotnet-install.ps1 -Channel "preview" -Version "1.0.0-beta-002071" -InstallDir "$env:DOTNET_INSTALL_DIR"

before_build:
- ps: dotnet restore
build:
  verbosity: minimal
test_script:
- ps: ./Coverage.ps1
